version: 1
frontend:
  phases:
    preBuild:
      commands:
        - 'echo "Current directory: $(pwd)"'
        - 'echo "Installing dependencies..."'
        - npm ci --prefix web
        - 'echo "Dependencies installed successfully"'
    build:
      commands:
        - 'echo "Building application..."'
        - npm run build --prefix web
        - 'echo "Build completed. Verifying output..."'
        - 'ls -la web/dist || echo "dist directory not found"'
        - 'test -f web/dist/index.html && echo "index.html found" || echo "index.html NOT found"'
  artifacts:
    baseDirectory: web/dist
    files:
      - '**/*'
  cache:
    paths:
      - web/node_modules/**/*
